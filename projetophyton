from collections import deque

# --------------------------
# Estruturas de Dados
# --------------------------
fila = deque()        # Queue
historico = []        # Lista para armazenar atendimentos
pilha_acoes = []      # Stack para desfazer a√ß√µes

# --------------------------
# Fun√ß√µes
# --------------------------
def adicionar_cliente(nome):
    fila.append(nome)
    pilha_acoes.append(("adicionar", nome))
    print(f"‚úÖ Cliente '{nome}' entrou na fila.")

def atender_cliente():
    if fila:
        cliente = fila.popleft()
        historico.append(cliente)
        pilha_acoes.append(("atender", cliente))
        print(f"üéØ Cliente '{cliente}' foi atendido.")
    else:
        print("‚ö†Ô∏è N√£o h√° clientes na fila.")

def desfazer_acao():
    if not pilha_acoes:
        print("‚ö†Ô∏è Nenhuma a√ß√£o para desfazer.")
        return
    
    acao, nome = pilha_acoes.pop()
    
    if acao == "adicionar":
        fila.remove(nome)
        print(f"‚Ü©Ô∏è Desfeito: Cliente '{nome}' removido da fila.")
    elif acao == "atender":
        historico.remove(nome)
        fila.appendleft(nome)
        print(f"‚Ü©Ô∏è Desfeito: Cliente '{nome}' voltou para o in√≠cio da fila.")

def mostrar_fila():
    print("\nüìã Fila atual:", list(fila) if fila else "Vazia")

def mostrar_historico():
    print("\nüìú Hist√≥rico de atendimentos:", historico if historico else "Nenhum atendimento.")

# --------------------------
# Programa Principal
# --------------------------
while True:
    print("\n--- Sistema de Atendimento ---")
    print("1 - Adicionar cliente")
    print("2 - Atender cliente")
    print("3 - Desfazer √∫ltima a√ß√£o")
    print("4 - Mostrar fila")
    print("5 - Mostrar hist√≥rico")
    print("0 - Sair")
    
    opcao = input("Escolha: ")
    
    if opcao == "1":
        nome = input("Nome do cliente: ")
        adicionar_cliente(nome)
    elif opcao == "2":
        atender_cliente()
    elif opcao == "3":
        desfazer_acao()
    elif opcao == "4":
        mostrar_fila()
    elif opcao == "5":
        mostrar_historico()
    elif opcao == "0":
        print("üëã Encerrando o sistema.")
        break
    else:
        print("‚ùå Op√ß√£o inv√°lida.")
